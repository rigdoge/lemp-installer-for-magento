# Nginx Monitor Configuration

# 监控设置
CHECK_INTERVAL=60          # 检查间隔（秒）
NGINX_STATUS_PATH="/nginx_status"
NGINX_STATUS_PORT=80
NGINX_CONF_PATH="/etc/nginx/nginx.conf"
NGINX_ACCESS_LOG="/var/log/nginx/access.log"
NGINX_ERROR_LOG="/var/log/nginx/error.log"

# 性能阈值
MAX_ACTIVE_CONNECTIONS=1000    # 最大活动连接数
MAX_WAITING_CONNECTIONS=100    # 最大等待连接数
MAX_REQUEST_RATE=1000         # 每秒最大请求数
MAX_ERROR_RATE=5              # 最大错误率（%）

# 响应时间阈值（毫秒）
MAX_AVG_RESPONSE_TIME=500     # 最大平均响应时间
MAX_P95_RESPONSE_TIME=1000    # 95 百分位响应时间
MAX_P99_RESPONSE_TIME=2000    # 99 百分位响应时间
SLOW_REQUEST_TIME=2000        # 慢请求阈值

# 状态码阈值
MAX_4XX_RATE=5               # 最大 4xx 错误率（%）
MAX_5XX_RATE=1               # 最大 5xx 错误率（%）
MAX_502_RATE=0.1             # 最大 502 错误率（%）
MAX_504_RATE=0.1             # 最大 504 错误率（%）

# 带宽阈值
MAX_BANDWIDTH_MB=100         # 最大带宽使用（MB/s）
MAX_TRAFFIC_GB=1000          # 每日最大流量（GB）

# SSL 设置
CHECK_SSL_EXPIRY=true        # 是否检查 SSL 证书过期
SSL_EXPIRY_WARN_DAYS=30      # SSL 证书过期警告天数
SSL_CERT_PATH="/etc/nginx/ssl/magento.crt"

# 日志设置
LOG_FILE="/var/log/nginx-monitor.log"
LOG_LEVEL="info"             # debug, info, warn, error
MAX_LOG_SIZE=100M            # 日志文件最大大小
MAX_LOG_FILES=10             # 保留的日志文件数量

# 告警设置
ALERT_EMAIL="admin@example.com"
ALERT_THRESHOLD=3            # 连续失败次数阈值
ALERT_INTERVAL=300           # 告警间隔（秒）

# 监控范围
MONITOR_VHOSTS=true          # 是否监控虚拟主机
MONITOR_UPSTREAMS=true       # 是否监控上游服务器
MONITOR_CACHE=true           # 是否监控缓存状态
MONITOR_GZIP=true            # 是否监控压缩状态

# 缓存设置
MAX_CACHE_SIZE=10G           # 最大缓存大小
MIN_CACHE_HIT_RATE=80        # 最小缓存命中率（%）
MAX_CACHE_AGE=7d             # 缓存最大保留时间

# 压缩设置
MIN_COMPRESSION_RATIO=3      # 最小压缩比
MAX_COMPRESSION_TIME=100     # 最大压缩时间（毫秒） 